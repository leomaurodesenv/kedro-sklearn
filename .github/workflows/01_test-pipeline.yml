name: "01. Run Tests"
run-name: Running tests "${{ github.ref }}" by "${{ github.actor }}"
on:
  push:
    # Sequence of patterns matched against refs/heads
    branches-ignore:
      - "dev/*"

jobs:
  ## Python linter check
  python-linter:
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: "3.9"
          cache: "pip" # caching pip dependencies
      - run: pip install -r kedro-sklearn/src/requirements.txt
      - name: Install lint libraries
        run: |
          pip install black
          pip install isort
        # pip install pylint
      - run: black --check kedro-sklearn/src
      - run: isort --profile black --check kedro-sklearn/src
      # - run: pylint kedro-sklearn/src/kedro_sklearn

  ## Run tests
  run-tests:
    if: success() || failure()
    runs-on: ubuntu-22.04
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: "3.9"
          cache: "pip" # caching pip dependencies
      - run: pip install -r kedro-sklearn/src/requirements.txt
      - name: Run tests
        run: |
          ls ${{ github.workspace }}
          cd kedro-sklearn
          pytest
          cd ..
